#include <iostream>
#include <fstream> 
#include <vector>
#include <algorithm>

using namespace std;

const char readPath[] = "D:\\input.txt";
const char writePath[] = "D:\\out.txt";

void printLogo(int task) {
	printf("************************************************************\n"
		"* Nizhniy Novgorod Technical University                    *\n");
	printf("* Study work number 2. Task number %d.                      *\n", task);
	printf("* Performed student 18 - IVT - 2. Kornilov Alexey          *\n"
		"************************************************************\n");
}

void sleep() {
	system("pause");
	cout << endl;
}

void myCls(int task) {
	system("cls");
	printLogo(task);
}

void jobDone() {
	cout << endl;
	puts("\nJob done.");
	cout << endl;
	sleep();
}

vector<char> read() {
	vector<char> vLineText;
	char symbol;
	ifstream f(readPath);
	while (!f.eof())
	{
		f.get(symbol);
		vLineText.push_back(symbol);
	}
	f.close();
	return vLineText;
}

void print(vector<char> vLineText) {
	for (char symbol : vLineText) {
		cout << symbol;
	}
}

void write(vector<char> vLineText) {
	ofstream  fout(writePath);
	for (char symbol : vLineText) {
		fout << symbol;
	}
	fout.close();
}

vector<char> input() {
	char symbol;
	vector<char> vResult;

	do
	{
		cin.get(symbol);

		vResult.push_back(symbol);
	} while (symbol != '\n');
	return vResult;
}

int find(vector<char> vec, vector<char> find) {
	size_t findSize = find.size() - 1;
	size_t ind = -1;
	bool done = false;

	for (size_t i = 0; i < vec.size() - findSize + 1; i++) {
		done = false;
		if (vec[i] == find[0]) {
			ind = i;
			done = true;
			size_t k = 0;
			for (size_t j = ind; j < ind + findSize; j++) {
				if (vec[j] != find[k]) {
					done = false;
					break;
				}
				k++;
			}

			if (done) break;
		}
	}


	if (done) {
		return ind;
	}
	else {
		return -1;
	}

}

int main() {
	setlocale(LC_ALL, ".866");

	while (true)
	{
		int task = 0;

		myCls(task);
		cout
			<< "Tasks.The source of the data and the result of the program is textual." << endl
			<< "file.For coding tex, the DOS code table (CP866) is used." << endl
			<< "Create a program that processes the file according to the specified the algorithm" << endl << endl;

		vector<char> vLineText = read();

		cout << endl << "============================" << endl;
		print(vLineText);
		cout << endl << "============================";

		cout << endl << endl << " Insert a word in the text between the two given." << endl;

		cout << " After word: ";
		vector<char> vLeft = input();

		cout << " Before the word: ";
		vector<char> vRight = input();

		cout << endl << " After: ";
		print(vLeft);
		cout << " After index: ";
		cout << find(vLineText, vLeft);
		//
		cout << endl << endl << " Before : ";
		print(vRight);
		cout << " Before index: ";
		cout << find(vLineText, vRight);
		//


		write(vLineText);
		vLineText.clear();
		jobDone();
	}
}
